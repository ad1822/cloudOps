iamidentitymapping
The ClusterName in your node AWS CloudFormation template doesnâ€™t exactly match the name of the cluster you want your nodes to join the cluster.
The node is not tagged as being owned by the cluster. Your nodes must have the following tag applied to them, where my-cluster is replaced with the name of your cluster.
Key 	Value
kubernetes.io/cluster/my-cluster  owned


If the node is deployed to a private subnet, then the subnet must have a route to a NAT gateway that has a public IP address assigned to it.




    Your launched instances are unable to register with your Amazon EKS cluster. Common causes of this failure are insufficient node IAM role permissions or lack of outbound internet access for the nodes. Your nodes must meet either of the following requirements:

        Able to access the internet using a public IP address. The security group associated to the subnet the node is in must allow the communication. For more information, see Subnet requirements and considerations and View Amazon EKS security group requirements for clusters.

        Your nodes and VPC must meet the requirements in Deploy private clusters with limited internet access.









aws ec2 describe-security-group-rules --filter Name="group-id",Values=$CONTROL_PLANE_SG

{
    "SecurityGroupRules": [
        {
            "SecurityGroupRuleId": "sgr-0bb5c067ae366a9a0",
            "GroupId": "sg-0a361ac3e548df3c4",
            "GroupOwnerId": "051826726751",
            "IsEgress": true,
            "IpProtocol": "-1",
            "FromPort": -1,
            "ToPort": -1,
            "CidrIpv4": "0.0.0.0/0",
            "Tags": [],
            "SecurityGroupRuleArn": "arn:aws:ec2:ap-south-1:051826726751:security-group-rule/sgr-0bb5c067ae366a9a0"
        },
        {
            "SecurityGroupRuleId": "sgr-0deba31ef9c9748fe",
            "GroupId": "sg-0a361ac3e548df3c4",
            "GroupOwnerId": "051826726751",
            "IsEgress": false,
            "IpProtocol": "-1",
            "FromPort": -1,
            "ToPort": -1,
            "ReferencedGroupInfo": {
                "GroupId": "sg-0a361ac3e548df3c4",
                "UserId": "051826726751"
            },
            "Tags": [],
            "SecurityGroupRuleArn": "arn:aws:ec2:ap-south-1:051826726751:security-group-rule/sgr-0deba31ef9c9748fe"
        }
    ]
}
